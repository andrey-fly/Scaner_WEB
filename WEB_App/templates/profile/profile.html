{% extends 'base/base.html' %} {% load static %} {% block title %}
<title>Профиль</title>
{% endblock %} {% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/profile.css'%}">
{% endblock %} {% block content %}

<h1 class="main-name text-center">Личный кабинет</h1>
<hr>

<div class="row">
    <div class="col mb-4">
        <img class="rounded mb-3 float-right my-image" src="{% static 'img/'%}{{photo}}" alt="icon">
    </div>
    <div class="col mb-4" style="position: relative;">
        <p class="card-title text-left">Имя: <span class="font-weight-bold">{{ user.username}}</span></p>
        <p class="card-title text-left">Email: <span class="font-weight-bold">{{ user.email }}</span></p>
        <p class="card-title text-left">Последний вход: <span class="font-weight-bold">{{ user.last_login }}</span>
        </p>
        <form class="form-group" action='/change_info/' method="POST"
              style="text-align: center; position: relative;">
            {% csrf_token %}
            <button type="submit" name="id" class="btn change-btn btn-md"><span
                    class="text-in-change-btn text-center">Изменить данные</span></button>
        </form>
    </div>
</div>

<hr>
<h2 class="text-center section-name">Мои продукты</h2>
<div id="carouselProducts" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        {% for own_good in own_goods%}
        {% if own_good.id == own_goods.0.id %}
        <li data-target="#carouselProducts" class="active"></li>
        {%else%}
        <li data-target="#carouselProducts"></li>
        {%endif%}
        {%endfor%}
    </ol>
    <div class="carousel-inner">
        {% for own_good in own_goods%}
        {% if own_good.id == own_goods.0.id %}
        <div class="carousel-item active">
            <img src="{{own_good.image.url}}" class="d-block w-100 photo" alt="...">
            <div class="carousel-caption d-md-block">
                <h3 class="card-title">{{own_good.name}}</h3>
                <p class="card-text ratingText">Статус: {{own_good.status}}</p>
            </div>
        </div>
        {%else%}
        <div class="carousel-item">
            <img src="{{own_good.image.url}}" class="d-block w-100 photo" alt="...">
            <div class="carousel-caption d-md-block">
                <h3 class="card-title">{{own_good.name}}</h3>
                <p class="card-text ratingText">Статус: {{own_good.status}}</p>
            </div>
        </div>
        {%endif%}
        {%endfor%}
    </div>
    <a class="carousel-control-prev" href="#carouselProducts" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselProducts" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<hr>
<h2 class="text-center section-name">Мои комментарии</h2>

<nav id="myScrollspy"></nav>
<div class="comment-scroll" data-spy="scroll" data-target="#myScrollspy" data-offset="10">
    {% for comment in comments %}
    <div class="card mb-3 comment-card">
        <div class="row no-gutters">
            <div class="col-md-4 comment-image"
                 style="background-image: url('{%for good in goods%}{%if comment.good == good.name%}{{good.file}}{%endif%}{%endfor%}');"></div>
            <div class="col-md-8">
                <div class="card-body comment-card-body">
                    <h5 class="card-title">{{comment.good}}</h5>
                    <p class="card-text text">{{comment.text}}</p>
                    <p class="card-text date">{{comment.created}}</p>
                </div>
            </div>
        </div>
    </div>
    {%endfor%}
</div>
<hr>
<h2 class="text-center section-name">Мои оценки</h2>
<div id="carouselRates" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        {% for rare in rates%}
        {% if rate.good == rate.0.good %}
        <li data-target="#carouselRates" class="active"></li>
        {% else %}
        <li data-target="#carouselRates" ></li>
        {% endif %}
        {% endfor %}
    </ol>
    <div class="carousel-inner">
        {% for rate in rates%}
        {% if rate.good == rates.0.good %}
        <div class="carousel-item active">
            <img src="{%for good in goods%}{%if rate.good == good.name%}{{good.file}}{%endif%}{%endfor%}" class="d-block w-100 photo" alt="...">
            <div class="carousel-caption d-md-block">
                <h3 class="card-title ratingTitle">{{rate.good}}</h3>
                <p class="card-text ratingText">Вы оценили этот товар {{rate.created}}</p>
                <p>Ваша оценка: </p>
            </div>
        </div>
        {% else %}
        <div class="carousel-item">
            <img src="{%for good in goods%}{%if rate.good == good.name%}{{good.file}}{%endif%}{%endfor%}" class="d-block w-100 photo" alt="...">
            <div class="carousel-caption d-md-block">
                <h3 class="card-title ratingTitle">rate.good</h3>
                <p class="card-text ratingText">Вы оценили этот товар {{rate.created}}</p>
                <p>Ваша оценка: </p>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <a class="carousel-control-prev" href="#carouselRates" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselRates" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
{% endblock %}
{% block extra_js %}
{% endblock %}